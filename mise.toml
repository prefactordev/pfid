[tools]
erlang = "28.3"
elixir = "1.19.4-otp-28"
node = "24"
pnpm = "10"
python = "3.13"

[env]
ERL_AFLAGS="-kernel shell_history enabled"

[tasks."elixir:test"]
run = 'cd elixir && mix test'

[tasks."elixir:console"]
run = 'cd elixir && iex -S mix'

[tasks."elixir:deps"]
run = 'cd elixir && mix deps.get'

[tasks."elixir:format"]
run = 'cd elixir && mix format'

[tasks."elixir:compile"]
run = 'cd elixir && mix compile'

[tasks."regenerate_fixtures"]
run = 'cd elixir && mix generate_fixtures ../fixtures/pfid_fixtures.csv'

[tasks."typescript:deps"]
run = 'cd typescript && pnpm install'

[tasks."typescript:test"]
run = 'cd typescript && pnpm test'

[tasks."typescript:build"]
run = 'cd typescript && pnpm run build'

[tasks."typescript:typecheck"]
run = 'cd typescript && pnpm run typecheck'

[tasks."python:deps"]
run = 'cd python && pip install -e ".[dev]"'

[tasks."python:test"]
run = 'cd python && pytest'

[tasks."python:typecheck"]
run = 'cd python && mypy src/pfid'

[tasks."python:lint"]
run = 'cd python && ruff check src/pfid tests'
